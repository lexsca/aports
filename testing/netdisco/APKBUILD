# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=netdisco
_pkgreal=App-Netdisco
pkgver=2.036007
pkgrel=0
pkgdesc="An open source web-based network management tool."
url="http://search.cpan.org/dist/App-Netdisco/"
arch="noarch"
license="bsd"
cpandepends="perl-dancer-plugin-passphrase perl-data-printer perl-plack perl-ldap
	perl-file-sharedir perl-starman perl-socket6 perl-json-xs perl-netaddr-mac
	perl-anyevent perl-uri perl-dancer-plugin-dbic perl-template-plugin-csv
	perl-try-tiny perl-snmp-info perl-list-moreutils perl-dbix-class
	perl-anyevent-dns-etchosts perl-daemon-control perl-file-slurper perl-moo
	perl-io-socket-ssl perl-role-tiny perl-algorithm-cron perl-sereal
	perl-template-plugin-number-format perl-json perl-dbix-class-helpers
	perl-dancer-plugin-auth-extensible perl-sql-translator perl-path-class
	perl-template-toolkit perl-url-encode perl-dancer perl-plack-middleware-reverseproxy
	perl-namespace-clean perl-cgi-expand perl-html-parser perl-net-dns
	perl-dancer-session-cookie perl-module-find perl-yaml-libyaml perl-netaddr-ip
	perl-guard perl-mce perl-plack-middleware-expires perl-dbd-pg"
# perl-app-local-lib-helper perl-app-cpanminus
cpanmakedepends=""
cpancheckdepends="perl-env-path"
depends="perl-term-ui perl-archive-extract $cpandepends"
makedepends="perl-dev $cpanmakedepends"
checkdepends="$cpancheckdepends"
subpackages="$pkgname-doc"
source="http://search.cpan.org/CPAN/authors/id/O/OL/OLIVER/$_pkgreal-$pkgver.tar.gz"
builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	default_prepare || return 1

	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	perl Build.PL installdirs=vendor || return 1
}

build() {
	cd "$builddir"
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	./Build
}

package() {
	cd "$builddir"
	./Build install destdir="$pkgdir" || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

check() {
	cd "$builddir"
	./Build test
}

sha512sums="e4b94508cbbe59f99e9dcfb82f02894fd6e6bfa0aa0c0ec6a4822d3ab9afda9936b905f2550eb8c39e17181ae34dbbfbeb7e6ef14a8b6c23230b66818abe7be8  App-Netdisco-2.036007.tar.gz"
